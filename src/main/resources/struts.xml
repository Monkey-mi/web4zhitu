<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" 
	"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
	<package name="hts-package" abstract="true" extends="json-default">
		<!-- 定义一个拦截器stack -->
		<interceptors>
			<interceptor-stack name="htsStack">
				<interceptor-ref name="defaultStack" />
				<!-- 覆盖defultStack中的exception设置，启用它的日志功能 -->
				<interceptor-ref name="exception">
					<param name="logEnabled">true</param>
					<param name="logLevel">info</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<!-- 修改默认的拦截器stack，原来是defaultStack -->
		<default-interceptor-ref name="htsStack" />

		<!--全局跳转 -->
		<global-results>
			<result name="exception">/error/error500.html</result>
		</global-results>

		<!-- 定义要捕获的异常 -->
		<global-exception-mappings>
			<exception-mapping result="exception" exception="java.lang.Exception" />
		</global-exception-mappings>
	</package>

	<package name="hts" namespace="/" extends="hts-package">
	
		<!-- 首页 -->
		<action name="">
			<result type="dispatcher">/index.html</result>
		</action>

		<!-- 首页 -->
		<action name="zhitu_*">
			<result type="dispatcher">/{1}2.jsp</result>
		</action>

		<action name="notfound">
			<result type="dispatcher">/error/error404.jsp</result>
		</action>

		<!-- 广告跳转 -->
		<action name="APP*" class="com.hts.web.operations.AdOperationsAction"
			method="checkAppLink">
			<result name="redirect" type="redirect">${appLink}</result>
			<result name="error" type="dispatcher">/error/error404.jsp</result>
		</action>

		<!-- 进入汇图世界(旧) -->
		<action name="NO*" class="com.hts.web.ztworld.ZTWorldAction"
			method="checkExists">
			<result name="phone" type="dispatcher">/htworld/phonev2/index.jsp</result>
			<result name="web" type="dispatcher">/htworld/webv2/index.jsp</result>
			<result name="error" type="dispatcher">/error/error404.jsp</result>
		</action>
		
		<!-- 进入汇图世界(新) -->
		<action name="DT*" class="com.hts.web.ztworld.ZTWorldAction"
			method="checkExists">
			<result name="phone" type="dispatcher">/htworld/phonev2/index.jsp</result>
			<result name="web" type="dispatcher">/htworld/webv2/index.jsp</result>
			<result name="error" type="dispatcher">/error/error404.jsp</result>
		</action>
		
		<!-- 邀请、下载页面跳转 -->
		<action name="download" class="com.hts.web.operations.UserOperationsAction"
			method="invite">
			<result name="phone" type="redirect">/index4ph.html</result>
			<result name="web" type="redirect">/</result>
			<result name="error" type="dispatcher">/error/error404.jsp</result>
		</action>
		
		<!-- 活动跳转 -->
		<action name="activity_*">
			<result type="dispatcher">/operations/phone/activity/{1}.jsp</result>
		</action>
		
		<!-- 下载页面跳转 -->
		<action name="qrdownload" class="com.hts.web.operations.UserOperationsAction"
			method="qrdownload">
			<result name="iphone" type="redirect">https://itunes.apple.com/cn/app/zhi-tu/id576156900?mt=8</result>
			<result name="android" type="redirect">http://dd.myapp.com/16891/1923471F4A3601B5AB88B5FB0EDB8965.apk?fsname=com%2Ehtshuo%2Ehtsg%5F2%2E9%2E5%5F28.apk</result>
		</action>
		
		<!-- 贴纸介绍页条状 -->
		<action name="sticker_intro">
			<result type="dispatcher">/htworld/stickerIntro.html</result>
		</action>

	</package>

	<include file="struts-constant.xml" />
	<include file="struts-user.xml" />
	<include file="struts-ztworld.xml" />
	<include file="struts-operations.xml" />
	<include file="struts-security.xml" />
	<include file="struts-qiniu.xml" />
</struts>


